<h1>
  <% (elements = @absolute_path.split("/")).count.times do |i| %>
    <%= "/" if i > 0 %>
    <%= link_to elements[i], "/#{ENV['URL_SCOPE']}#{elements[0..i].join("/")}" %>
  <% end %>
</h1>

<table>
  <thead>
    <tr>
      <th>Filename</th>
      <th>Size</th>
      <th>Date</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    <% @directory.each do |entry| %>
    <tr>
      <td>
        <%= link_to "#{entry[:entry]}", "/#{ENV['URL_SCOPE']}/#{entry[:relative]}", class: entry[:type].to_s %>
      </td>
      <td>
        <%= entry[:size] %>
      </td>
      <td>
        <%= entry[:date] %>
      </td>
      <td>
        <% if entry[:entry] != './' && entry[:entry] != '../' %>
          <%= link_to 'Delete', "/#{ENV['URL_SCOPE']}/#{entry[:relative]}", method: :delete, class: 'delete', data: { confirm: "Are you sure you want to delete `#{entry[:absolute]}`?" } %>
        <% end %>
      </td>
    </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "upload", upload_path(path: @absolute_path) %>
